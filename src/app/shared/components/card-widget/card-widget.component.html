<div 
  [routerLink]="!isLoading ? detailsLink : null"
  [class.cursor-pointer]="!isLoading && detailsLink"
  [class.pointer-events-none]="isLoading"
  class="bg-white dark:bg-slate-800 p-5 shadow-lg rounded-xl border 
         transition-all duration-200 hover:shadow-2xl flex flex-col justify-between min-h-[180px]" 
         [ngClass]="cardBorderClass">

  <div *ngIf="isLoading; else content" class="animate-pulse flex flex-col justify-between h-full">
    <div>
      <div class="flex items-start justify-between mb-3">
        <div class="h-6 w-3/5 bg-slate-200 dark:bg-slate-700 rounded"></div> <div class="w-10 h-10 rounded-lg bg-slate-200 dark:bg-slate-700"></div> </div>
      <div class="h-10 w-1/2 bg-slate-200 dark:bg-slate-700 rounded mb-2"></div> <div class="h-4 w-2/5 bg-slate-200 dark:bg-slate-700 rounded"></div>   </div>
    <div class="mt-3 pt-3 border-t border-slate-200 dark:border-slate-700">
      <div class="h-3 w-full bg-slate-200 dark:bg-slate-700 rounded"></div> </div>
  </div>

  <ng-template #content>
    <div class="flex items-start justify-between mb-2">
      <h3 class="text-base font-semibold text-slate-600 dark:text-slate-300 leading-tight">
        {{ title }}
      </h3>
      <div *ngIf="icon" 
           class="p-2.5 rounded-lg -mt-1 -mr-1" 
           [ngClass]="iconContainerClasses">
        <i class="{{ icon }} text-xl"></i>
      </div>
    </div>

    <div class="mt-1 mb-3">
      <p class="text-3xl font-bold text-slate-800 dark:text-slate-100 truncate" [title]="value">
        {{ value }}
      </p>
      <div *ngIf="trend" class="flex items-center text-xs mt-1" [ngClass]="trendTextColorClass">
        <i class="{{ trendIconClasses }} mr-1 text-sm"></i>
        <span>{{ trend.value }}</span>
      </div>
    </div>
    
    <div *ngIf="footerText" class="mt-auto pt-2 text-xs text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700">
        {{ footerText }}
    </div>
  </ng-template>
</div>