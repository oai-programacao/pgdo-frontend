<div
  class="mb-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 p-4 dark:border-slate-700 rounded-md bg-slate-50 dark:bg-slate-800"
>
  <div>
    <label
      for="filterCity"
      class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"
      >Cidade</label
    >
    <p-select
      appendTo="body"
      id="filterCity"
      [options]="cities"
      [(ngModel)]="selectedCity"
      optionLabel="label"
      optionValue="value"
      placeholder="Todas as Cidades"
      styleClass="w-full"
      panelStyleClass="w-full"
      (onChange)="onFilterChange()"
      showClear
    />
  </div>
  <div>
    <label
      for="filterTypeOfOs"
      class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"
      >Tipo de OS</label
    >
    <p-select
      appendTo="body"
      id="filterTypeOfOs"
      [options]="typesOfOs"
      [(ngModel)]="selectedTypeOfOs"
      optionLabel="label"
      optionValue="value"
      placeholder="Todas as Cidades"
      styleClass="w-full"
      panelStyleClass="w-full"
      (onChange)="onFilterChange()"
      showClear
    />
  </div>
  <div>
    <label
      for="filterPeriods"
      class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"
      >Períodos</label
    >
    <p-select
      appendTo="body"
      id="filterPeriods"
      [options]="periods"
      [(ngModel)]="selectedPeriod"
      optionLabel="label"
      optionValue="value"
      placeholder="Todos os Períodos"
      styleClass="w-full"
      panelStyleClass="w-full"
      (onChange)="onFilterChange()"
      showClear
    />
  </div>
</div>

<p-table
  [value]="offers"
  [loading]="isLoading"
  responsiveLayout="scroll"
  styleClass="p-datatable-striped p-datatable-gridlines"
  [paginator]="true"
  [rows]="10"
  [rowsPerPageOptions]="[10, 25, 50]"
  currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} ofertas"
  [showCurrentPageReport]="true"
>
  <ng-template #header>
    <tr>
      <th
        class="p-4 text-left w-1/5 text-sm font-semibold text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-700"
      >
        Cidade
      </th>
      <th
        class="p-4 text-left w-1/5 text-sm font-semibold text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-700"
      >
        Tipo de OS
      </th>
      <th
        class="p-4 text-left w-1/5 text-sm font-semibold text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-700"
      >
        Data
      </th>
      <th
        class="p-4 text-left w-1/5 text-sm font-semibold text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-700"
      >
        Periodo
      </th>
      <th
        class="p-4 text-left w-1/5 text-sm font-semibold text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-700"
      >
        Quantidade
      </th>
    </tr>
  </ng-template>
  <ng-template #body let-offer>
    <tr>
      <td
        class="p-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-200"
      >
        {{ formattedCity(offer.city) }}
      </td>
      <td
        class="p-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-200"
      >
        {{ formattedTypeOfOs(offer.typeOfOs) }}
      </td>
      <td
        class="p-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-200"
      >
        {{ offer.date }}
      </td>
      <td
        class="p-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-200"
      >
        {{ formattedPeriod(offer.period) }}
      </td>
      <td
        class="p-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-200"
        [ngClass]="{
          'text-red-500': offer.total <= 5,
          'text-green-500': offer.total >= 6
        }"
      >
        {{ offer.total }}
      </td>
    </tr>
  </ng-template>
</p-table>
